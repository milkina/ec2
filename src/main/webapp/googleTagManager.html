<!-- Google Tag Manager -->
<script>
    (function(w,d,s,l,i){
      w[l]=w[l]||[];
      w[l].push({'gtm.start': new Date().getTime(), event:'gtm.js'});
      var f=d.getElementsByTagName(s)[0], j=d.createElement(s), dl=l!='dataLayer'?'&l='+l:'';
      j.async=true; j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
      f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-KMPGXK7');
</script>
<!-- End Google Tag Manager -->

<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}

    // 1. По умолчанию аналитика и реклама запрещены
    gtag('consent', 'default', {
      'analytics_storage': 'denied',
      'ad_storage': 'denied'
    });

    gtag('js', new Date());

    // 2. Конфигурация GA4 (данные не собираются до согласия)
    gtag('config', 'G-8BDCH0QDWY');

    // 3. Функция обновления согласия после нажатия кнопки
    function acceptCookies() {
      gtag('consent', 'update', {
        'analytics_storage': 'granted',
        'ad_storage': 'granted'
      });

      // Скрываем баннер после согласия
      document.getElementById('cookie-banner').style.display = 'none';
    }
</script>

<!-- Баннер согласия -->
<div id="cookie-banner" style="position: fixed; bottom: 10px; left: 10px; right: 10px;background: rgba(0,0,0,0.8); color: white; padding: 15px;text-align: center; z-index: 9999; border-radius: 5px;">
    <p>Accept Cookies</p>
    <button onclick="acceptCookies()" style="background: green; color: white; padding: 10px 20px; border: none; cursor: pointer;">Accept Cookies</button>
</div>